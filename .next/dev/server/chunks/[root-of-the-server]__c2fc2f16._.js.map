{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/game/IIITH/src/app/api/documents/upload/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\n\nexport const runtime = 'nodejs'\n\n// In-memory store (demo-safe)\nlet STORED_TEXT = ''\n\nexport async function POST(request: NextRequest) {\n  try {\n    const formData = await request.formData()\n    const file = formData.get('file') as File | null\n\n    if (!file) {\n      return NextResponse.json({ error: 'No file uploaded' }, { status: 400 })\n    }\n\n    // Read file as text (works for text-based PDFs / notes)\n    const text = await file.text()\n\n    if (!text.trim()) {\n      return NextResponse.json(\n        { error: 'File contains no readable text' },\n        { status: 400 }\n      )\n    }\n\n    STORED_TEXT = text\n\n    return NextResponse.json({\n      success: true,\n      message: 'Document uploaded and indexed (demo mode)'\n    })\n  } catch (e) {\n    console.error(e)\n    return NextResponse.json(\n      { error: 'Upload failed' },\n      { status: 500 }\n    )\n  }\n}\n\n// Export getter for answer API\nexport function getStoredText() {\n  return STORED_TEXT\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,MAAM,UAAU;AAEvB,8BAA8B;AAC9B,IAAI,cAAc;AAEX,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,wDAAwD;QACxD,MAAM,OAAO,MAAM,KAAK,IAAI;QAE5B,IAAI,CAAC,KAAK,IAAI,IAAI;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiC,GAC1C;gBAAE,QAAQ;YAAI;QAElB;QAEA,cAAc;QAEd,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAgB,GACzB;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,SAAS;IACd,OAAO;AACT"}}]
}